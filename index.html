<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=National+Park:wght@200..800&display=swap" rel="stylesheet">
    <title>Daily Tasks</title>
    <link rel="icon" type="image/x-icon" href="https://cdn.pixabay.com/photo/2017/02/15/20/49/yes-2069849_1280.png">
    <style>
        *{
             font-family: "National Park", sans-serif;
            font-weight:400;
        }

        .container{
            display:grid;
            grid-template-columns: repeat(3, 1fr);
            gap:30px;
            padding:30px 20px;
        }
/* width */
::-webkit-scrollbar {
  width: 10px;
}

/* Track */
::-webkit-scrollbar-track {
  box-shadow: inset 0 0 5px grey; 
  border-radius: 5px;
}
 
/* Handle */
::-webkit-scrollbar-thumb {
  background: #9e9e9e; 
  border-radius: 10px;
}

/* Handle on hover */
::-webkit-scrollbar-thumb:hover {
  background: #b30000; 
}
        .container ul{
            max-height:500px;
            overflow-y:auto;
        }
        .grid ul{
            max-height:410px;
        }
        .top{
           padding:20px; 
        }
        .top input{
            max-width:300px;
        }
        
        .container > div,.top>div,.pie,.card-body{
            box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;
            padding:20px;
            border-radius: 8px;
            height:fit-content;
                }
                .card-body .card-body{
                    box-shadow:unset;
                    margin:0;
                }
                .pie,.pie-div > .card-body{
                    margin:30px 20px;
                    display:block;
                    /* margin: auto; */
                    width:35%;
                }
                .pie-div > .card-body{
width:65%;
                }
        .progress .move{
            display: none;
        }
        .completed .move2{
            display: none;
        }
        .bttns{
            display: flex;
    gap: 10px;
    align-items: center;
    justify-content: flex-end;
        }
       body > div:not(.top) li{
            list-style: none;
            padding: 10px;
           margin-block:5px;
    border: 1px solid #d0d0d0;
    box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
    border-radius: 8px;
    
        }
        .top li{
                        list-style: none;
            padding: 10px;
           margin-block:5px;
        }

        ul{
            padding:0;
        }
        button{
            background: #01579B;
    border: none;
    outline: none;
    padding: 10px 15px;
    border-radius: 8px;
    color: #fff;
    font-size: 14px;
    cursor: pointer;
        }
        input{
    width: -webkit-fill-available;

    border: none;
            font-size:16px;
    outline: none;
    padding-block:5px;
        }
        article,.top input{
            box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;
            padding: 10px;
            border-radius: 8px;

        }
.top li:hover{
    background-color: #b3e5fc;
}
        .move,.move2{
            cursor: pointer;
        }
        .progress{
            background: linear-gradient(90deg, #42A5F5 6%, #64B5F6 50%);
            
        }
        :is(.progress,.completed) h2{
            color:#fff;
        }
        .progress li{
            background-color: #FFf;
        }
        .completed{
            background: linear-gradient(90deg,rgba(184, 33, 78, 1) 0%, rgba(161, 34, 142, 1) 50%);

        }
        .completed li{
background-color: #fff;
        }
        .dateContainer{
            font-size: 10px;
    justify-self: flex-start;
    color: #565353;
        }
        .input-group{
    width: 100%;
}
        a{
            word-break: break-all;
        }
        .changetype::placeholder{
            color:#2196f3;
        }
        .pie-div{
    display:flex;
    justify-content: center;

}
.grid-inf{
    display: grid;
    gap:20px;
    grid-template-columns: repeat(2, 1fr);
}
h5,p{
    margin-block:10px;
}
        .card-text{
            font-size:4rem;
        }
        h5{
            font-size:1rem;
        }
        .notice{
            margin-block:20px;
        }
                @media(max-width:1024px){
            .container{
            grid-template-columns: repeat(2, 1fr);

        }
        }
        @media(max-width:767px){
            .container{
            grid-template-columns: repeat(1, 1fr);

        }
                    .pie-div{
   flex-direction: column;
    
}
.grid-inf{

    grid-template-columns: repeat(1, 1fr);
}
.pie,.pie-div > .card-body{

    min-width: unset;
    width: calc(100% - 70px);
                }
        }

    </style>
</head>
<body>
    <div class="top">
        <div>
        <div class="flex" style="display: flex; flex-wrap:wrap; gap:20px; align-items: center;justify-content: space-between;width: 100%;">
        <figure style="margin:0px">
                <img src="https://picsum.photos/300/200" id="preview" style="width:80px;height:80px;border-radius: 50%;border:2px solid #4f6bc7; object-fit: cover;"/>
                <input type="file" id="imageInput" accept="image/*" style="display:none">
                <label for="imageInput" style="background:rgb(216, 216, 216);display:grid;place-content:center;width:30px;height:30px;border-radius: 50%;margin-top: -22px;position: relative;z-index: 2;"><svg width="15px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path  d="M149.1 64.8L138.7 96 64 96C28.7 96 0 124.7 0 160L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64l-74.7 0L362.9 64.8C356.4 45.2 338.1 32 317.4 32L194.6 32c-20.7 0-39 13.2-45.5 32.8zM256 192a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"/></svg></label>
        </figure>
        <input class="input" style="margin-bottom:10px;" type="text" placeholder="Search Tasks">
        </div>  
        <i></i>
        <ul>
            
        </ul>
        </div>
    </div>
<div class="container">
    <div class="grid">
        <h2>TODO</h2>
        <article style="display: flex;">
         <span class="input-group">
        <span class="inputwrap">
        <input type="text" placeholder="Enter Your Task "/>
        <input class="changetype" type="hidden" />
    </span>
        <span class="input-btn">
            <span class="icons link" style="cursor:pointer"><svg width="15px" height="15px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="blue" d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"/></svg></span>
        </span>
        </span>          
<span class="button" style="cursor:pointer;height: fit-content;padding: 8px;"><svg width="20px" height="20px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="#2196f3" d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480l0-83.6c0-4 1.5-7.8 4.2-10.8L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"></path></svg></span>
        </article>
        <div></div>
        
        

    </div>
    <div class="progress">
      <h2>IN PROGRESS</h2>
      <ul class="item1"></ul>
    </div>
    <div class="completed">
      <h2>COMPLETED</h2>
      <ul class="item2"></ul>
    </div>
</div>
<div class="pie-div">
    <div class="card-body" >
        <div style="display:flex;justify-content: space-between;align-items: center; gap:20px">
        <h5 class="card-title" style="font-size: 1.25rem; font-weight: bold; margin-bottom: 10px;">Today's Summary</h5>
        <div class="bottom">
            <button style="margin-left: auto;" class="clear-btn">Clear All</button>
        
        </div>
    </div>
        <p class="notice" ></p>
        <div class="grid-inf" >
            <div class="col">
                <div class="card card-stat h-100" style="border: 1px solid #ddd; border-radius: 8px; background-color: #ffffff;">
                    <div  style="padding: 15px;">
                        
                        <p id="dataTodo" class="card-text display-6 m-0" style=" font-weight: 500; color: #42A5EF"></p>
                        <h5 class="card-title" style="font-size: 1.125rem; font-weight: bold;">TODO</h5>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card card-stat h-100" style="border: 1px solid #ddd; border-radius: 8px; background-color: #ffffff;">
                    <div  style="padding: 15px;">
                        
                        <p id="dataProgress" class="card-text display-6 m-0" style=" font-weight: 500; color: #fbc02d;"></p>
                        <h5 class="card-title" style="font-size: 1.125rem; font-weight: bold;">IN PROGRESS</h5>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card card-stat h-100" style="border: 1px solid #ddd; border-radius: 8px; background-color: #ffffff;">
                    <div  style="padding: 15px;">
                         <p id="dataCompleted"class="card-text display-6 m-0" style=" font-weight: 500; color: #81C784;"></p>
                        <h5 class="card-title" style="font-size: 1.125rem; font-weight: bold;">COMPLETED</h5>
                       
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card card-stat h-100" style="border: 1px solid #ddd; border-radius: 8px; background-color: #ffffff;">
                    <div  style="padding: 15px;">
                        <p id="dataBackup"class="card-text display-6 m-0" style="font-weight: 500; color: #ff0741;">
                        <h5 class="card-title" style="font-size: 1.125rem; font-weight: bold;">BACKUP</h5>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="pie">
        <canvas id="donutChart" class="fixed-chart"></canvas>
    </div>
</div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> 
<script>
    let par = document.querySelector('.grid input');
    let pa = document.querySelector('.grid div');
    let btnn = document.querySelector('.button');
    let changeType =document.querySelector('.changetype');
    let Link =document.querySelector('.link');
    let arr = JSON.parse(localStorage.getItem("arr")) || [];
    let arr2 = JSON.parse(localStorage.getItem("arr2")) || [];
    let taskList1 = document.querySelector(".progress ul");
    let taskList2 = document.querySelector(".completed ul");
       const input = document.getElementById('imageInput');
  const preview = document.getElementById('preview');
  const inputSrc =preview.src;
   


    function updateStorage() {
        localStorage.setItem("arr", JSON.stringify(arr));
        localStorage.setItem("arr2", JSON.stringify(arr2));
        localStorage.setItem("taskList1", taskList1.innerHTML);
        localStorage.setItem("taskList2", taskList2.innerHTML);
        // console.log("asas",taskList1 );
    }
 

    function renderTasks() {
        pa.innerHTML = "<ul>" + arr.map((item, index) => {
            return `<li>
                <div>
                    <div class="text" style="padding-bottom:8px;">${item.text === "" ? "Empty" : item.text}</div>
                    ${item.link ? `
                    <div class="linkDiv" style="padding-bottom:8px;">
                        <a href="${item.link}" target="_blank">${item.link}</a>
                    </div>` : ""}
                    
                    
                    <div class="bttns">
                        <span class="dateContainer">${item.time}</span>
                        <span class="move" style="padding:7px; font-size:12px; color:#fff; background:#fbc02d; border-radius:8px;white-space: nowrap;">In Progress</span>
                        <span class="move2" style="padding:7px; color:#fff; font-size:12px; color red;background:#81C784; border-radius:8px;white-space: nowrap;">Completed</span>
                        <span class="cross" style="cursor:pointer">
                            <svg height="18px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                <path fill="#f98092" d="M135.2 17.7C140.6 6.8 151.7 0 163.8 0L284.2 0c12.1 0 23.2 6.8 28.6 17.7L320 32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 96C14.3 96 0 81.7 0 64S14.3 32 32 32l96 0 7.2-14.3zM32 128l384 0 0 320c0 35.3-28.7 64-64 64L96 512c-35.3 0-64-28.7-64-64l0-320zm96 64c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16z"/>
                            </svg>
                        </span>
                    </div>
                </div>
            </li>`;
        }).join('') + "</ul>";

        document.querySelectorAll(".cross").forEach((cs , index) => cs.addEventListener("click", function () {
            const li = cs.closest('li');
            
            const valueToRemove = li.querySelector(".dateContainer").innerHTML.trim();
            const index = arr.findIndex(item => item.time.trim() === valueToRemove);
            if (index !== -1) {arr.splice(index, 1);
                
                li.remove();
                updateStorage();
                renderChart();
            }
            const backupIndex = arr2.findIndex(item => item.time.trim() === valueToRemove);
            if (backupIndex !== -1) {arr2.splice(backupIndex, 1);
                       
                li.remove();
                updateStorage();
                renderChart();
            }
            
        }));

        document.querySelectorAll('.move').forEach((mv) => {
            mv.addEventListener("click", function () {
                const toMove = mv.closest('li');
                const parent = toMove.parentElement;
                if (parent.closest('.grid')) {
                    const valueToRemove = toMove.querySelector(".dateContainer").innerHTML.trim();
                    const index = arr.findIndex(item => item.time.trim() === valueToRemove);
                    if (index !== -1) arr.splice(index, 1);
                    updateStorage();
                        renderChart();
                }
                taskList1.append(toMove);
                updateStorage();
                    renderChart();
            });
        });

        document.querySelectorAll('.move2').forEach((mc) => {
            mc.addEventListener("click", function () {
                const toMove2 = mc.closest('li');
                const parent = toMove2.parentElement;
                if (parent.closest('.grid')) {
                    const valueToRemove = toMove2.querySelector(".dateContainer").innerHTML.trim();
                    const index = arr.findIndex(item => item.time.trim() === valueToRemove);
                    if (index !== -1) arr.splice(index, 1);
                    updateStorage();
                        renderChart();
                }
                taskList2.append(toMove2);
                updateStorage();
                    renderChart();
            });
        });
    }
        Link.addEventListener("click",function(){
            if(par.value == ""){
                par.placeholder = "Please Enter Task First To Add Link";
                alert("Please enter task first to add link");
                
            }
            else{
        changeType.type="url";
        changeType.setAttribute("placeholder","Enter URL");
            }
    });

    btnn.addEventListener("click", function () {
       let linkType = document.querySelector('input[type="url"]');

        let val = par.value.trim();

        if (linkType) {
        linkval = linkType.value.trim();
               console.log("linkval",linkval);
            } 
            else{
                linkval = "";
            }
        if (val !== "") {

             arr.push({ text: val, time: `(${new Date().toLocaleDateString()}) ${new Date().toLocaleTimeString()}`,link:linkval });
            arr2.push({ text: val, time: `(${new Date().toLocaleDateString()}) ${new Date().toLocaleTimeString()}`,link:linkval });
            updateStorage();
                renderChart();
        }
        renderTasks();
        par.value = "";
        par.placeholder = val === "" ? "Empty! Enter Your Task Please" : "Enter Your Task ";
       
                changeType.type="hidden";
        if(linkType){
        linkType.value = "";
        }
    });

    document.querySelector(".top .input").addEventListener("input", function () {
        let searchValue = this.value.trim().toLowerCase();
        let filtered = searchValue === '' ? [] : arr2.filter(item => item.text.toLowerCase().includes(searchValue));
        document.querySelector(".top i").innerHTML = filtered.length !== 0 ? `<span>Total result: ${ filtered.length }</span>`: '';
        document.querySelector(".top ul").innerHTML =
            filtered.map(item => `<li>${item.text}</li>`).join('');

        let searchInputs = document.querySelectorAll(".text");

        document.querySelectorAll(".top li").forEach((liItem) => {
            liItem.addEventListener("click", function () {
                let clickedText = liItem.textContent.trim().toLowerCase();
                searchInputs.forEach((input) => {
                    let inputVal = input.textContent.trim().toLowerCase();
                    input.closest('li').style.background = (clickedText === inputVal) ? "#b3e5fc" : "";
                });
            });
        });
    });

    // render tasks on page load
    window.addEventListener("DOMContentLoaded", function() {
    // Load stored tasks from localStorage into the columns
    taskList1.innerHTML = localStorage.getItem("taskList1") || "";
    taskList2.innerHTML = localStorage.getItem("taskList2") || "";
    renderTasks();
    renderChart();

    document.querySelector('.clear-btn').addEventListener("click",function(){
        localStorage.clear();
        // localStorage.removeItem("taskList1");
        // localStorage.removeItem("taskList2");
        // localStorage.removeItem("arr");
        // localStorage.removeItem("arr2");
        
        alert('Task board data cleared!');
        arr=[];
        arr2=[];
        document.querySelectorAll('li').forEach((remove)=>remove.remove());
        renderChart();
    });
            const savedSrc = localStorage.getItem("inputSrc");
  if (savedSrc) {
    preview.src = savedSrc;
    preview.style.display = 'block';
  }

  input.addEventListener('change', function () {
    const file = this.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function (e) {
        preview.src = e.target.result;
        preview.style.display = 'block';
        localStorage.setItem("inputSrc", preview.src); 

      };
      reader.readAsDataURL(file);
    }
  });

});
      
   const inquiryTypes = ["To Do", "In Progress", "Completed"];
  const colors = ['#FF0000', '#fbc02d', '#81C784'];



  const ctx = document.getElementById('donutChart').getContext('2d');
  let donutChart;

  function renderChart() {
          let data1 = document.querySelectorAll('.item1 li').length;
   let data2 = document.querySelectorAll('.item2 li').length;
   let data3 = arr.length;
   let data4 = arr2.length;
        console.log("progress",data1);
        console.log("completed",data2);
        console.log("arr",data3);
        console.log("arr2",data4);
  

    const dataValues = [data3,data1,data2];
    const total = dataValues.reduce((a, b) => a + b, 0);

    if (donutChart) donutChart.destroy();

    donutChart = new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: inquiryTypes,
        datasets: [{
          data: dataValues,
          backgroundColor: colors,
          borderColor: "#fff",
          borderWidth: 2
        }]
      },
      options: {
        responsive: true,
        animation: {
          animateScale: true,
          duration: 1200
        },
        plugins: {
          legend: {
            position: 'top',
            labels: {
              font: { size: 14 },
              usePointStyle: true
            }
          },
          tooltip: {
            callbacks: {
              label: function(context) {
                const val = context.raw;
                const percent = ((val / total) * 100).toFixed(1);
                return `${context.label}: ${val} Tasks (${percent}%)`;
              }
            }
          },
          datalabels: {
            color: '#fff',
            font: {
              weight: 'bold',
              size: 14
            },
            formatter: (value, context) => {
              const percent = ((value / total) * 100).toFixed(1);
              return `${percent}%`;
            }
          }
        },
        onClick: (e, elements) => {
          if (elements.length > 0) {
            const idx = elements[0].index;
            const type = inquiryTypes[idx];
            const count = dataValues[idx];
            const percent = ((count / total) * 100).toFixed(1);
            document.getElementById('detailsText').textContent =
              `${type} — ${count} inquiries (${percent}%)`;
            document.getElementById('detailsBox').style.display = 'block';
          }
        }
      },
    //   plugins: [ChartDataLabels]
    });
      document.querySelector('#dataTodo').textContent = data3;
    document.querySelector('#dataProgress').textContent = data1;
    document.querySelector('#dataCompleted').textContent = data2;
    document.querySelector('#dataBackup').textContent = data4;
    let Notice = document.querySelector('.notice')
 if(data1 + data2 < data3  ){
    Notice.textContent = "You Have alot of task in pending ! Plaese check it";
    Notice.setAttribute('style','color:blue');
  }
  else if((data1 > data2) && (data1 > data3)  ){
    Notice.textContent = "You Have alot of task in progress ! Plaese complete it";
    Notice.setAttribute('style','color:blue');
  }

  else if((data1 + data2) + data3 != data4){
    Notice.textContent = "There is Error in System";
    Notice.setAttribute('style','color:Red');

  }

  else if((data3 == 0 && data2 == 0 && data1 == 0)  ){
    Notice.textContent = "You have no task to do";
    Notice.setAttribute('style','color:red');
  }
  else if((data1 === 0) && (data3 === 0 ) ){
    Notice.textContent = "Congratulation, You have completed all task";
    Notice.setAttribute('style','color:blue');
  }
  else if((data2 > data1) && (data2 > data3)  ){
    Notice.textContent = "You are Completing Task ! Keep going";
    Notice.setAttribute('style','color:blue');
  }
  else{
    Notice.textContent = "All updated, Keep going";
    Notice.setAttribute('style','color:Red');
  }
}

  

</script>

    
  
</body>
</html>
