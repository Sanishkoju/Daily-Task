<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=National+Park:wght@200..800&display=swap" rel="stylesheet">
    <title>Daily Tasks</title>
    <link rel="icon" type="image/x-icon" href="https://cdn.pixabay.com/photo/2017/02/15/20/49/yes-2069849_1280.png">
    <style>
        *{
             font-family: "National Park", sans-serif;
            font-weight:400;
        }

        .container{
            display:grid;
            grid-template-columns: repeat(3, 1fr);
            gap:30px;
            padding:30px 20px;
        }
        .top{
           padding:20px; 
        }
        .top input{
            max-width:300px;
        }
        
        .container > div,.top>div{
            box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;
            padding:30px;
            border-radius: 8px;
            height:fit-content;
                }
        .progress .move{
            display: none;
        }
        .completed .move2{
            display: none;
        }
        .bttns{
            display: flex;
    gap: 10px;
    align-items: center;
    justify-content: flex-end;
        }
        li{
            list-style: none;
            padding: 10px;
    border: 1px solid #d0d0d0;
    box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
    border-radius: 8px;
    margin-block:5px;
        }
        ul{
            padding:0;
        }
        button{
            background: #01579B;
    border: none;
    outline: none;
    padding: 10px 15px;
    border-radius: 8px;
    color: #fff;
    font-size: 14px;
    cursor: pointer;
        }
        input{
    width: -webkit-fill-available;
    padding: 10px;
    border-radius: 8px;
    border: none;
            font-size:16px;
    outline: none;
    box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;
        }
.top li:hover{
    background-color: #b3e5fc;
}
        .move,.move2{
            cursor: pointer;
        }
        .progress{
            background: linear-gradient(90deg, #42A5F5 6%, #64B5F6 50%);
            
        }
        :is(.progress,.completed) h2{
            color:#fff;
        }
        .progress li{
            background-color: #FFf;
        }
        .completed{
            background: linear-gradient(90deg,rgba(184, 33, 78, 1) 0%, rgba(161, 34, 142, 1) 50%);

        }
        .completed li{
background-color: #fff;
        }
        .dateContainer{
            font-size: 10px;
    justify-self: flex-start;
    color: #565353;
        }
                @media(max-width:1024px){
            .container{
            grid-template-columns: repeat(2, 1fr);

        }
        }
        @media(max-width:767px){
            .container{
            grid-template-columns: repeat(1, 1fr);

        }
        }

    </style>
</head>
<body>
    <div class="top">
        <div>
        <div class="flex" style="display: flex; flex-wrap:wrap; gap:20px; align-items: center;justify-content: space-between;width: 100%;">
            <h2>DAILY TASKS</h2>
        <input style="margin-bottom:10px;" type="text" placeholder="Search Tasks">
        </div>  
        <i></i>
        <ul>
            
        </ul>
        </div>
    </div>
<div class="container">
    <div class="grid">
        <h2>TODO</h2>
        <article style="display: flex;gap:20px;">
        <input type="text" placeholder="Enter Your Task "/>
        <button>ADD</button>
        </article>
        <div></div>
        
        

    </div>
    <div class="progress">
      <h2>IN PROGRESS</h2>
      <ul></ul>
    </div>
    <div class="completed">
      <h2>COMPLETED</h2>
      <ul></ul>
    </div>
</div>
    <div class="bottom" style="padding:30px 20px">
    <button style="margin-left: auto; display:block" class="clear-btn">CLEAR ALL</button>

</div>

<script>
    let par = document.querySelector('.grid input');
    let pa = document.querySelector('.grid div');
    let btnn = document.querySelector('button');
    let arr = JSON.parse(localStorage.getItem("arr")) || [];
    let arr2 = JSON.parse(localStorage.getItem("arr2")) || [];
    let taskList1 = document.querySelector(".progress ul");
    let taskList2 = document.querySelector(".completed ul");
   


    function updateStorage() {
        localStorage.setItem("arr", JSON.stringify(arr));
        localStorage.setItem("arr2", JSON.stringify(arr2));
        localStorage.setItem("taskList1", taskList1.innerHTML);
        localStorage.setItem("taskList2", taskList2.innerHTML);
        console.log("asas",taskList1 );
    }
 

    function renderTasks() {
        pa.innerHTML = "<ul>" + arr.map((item, index) => {
            return `<li>
                <div>
                    <div class="text" style="padding-bottom:5px;">${item.text === "" ? "Empty" : item.text}</div>
                    <div class="bttns">
                        <span class="dateContainer">${item.time}</span>
                        <span class="move" style="padding:7px; font-size:12px; color:#fff; background:#fbc02d; border-radius:8px;white-space: nowrap;">In Progress</span>
                        <span class="move2" style="padding:7px; color:#fff; font-size:12px; color red;background:#81C784; border-radius:8px;white-space: nowrap;">Completed</span>
                        <span class="cross" style="cursor:pointer">
                            <svg height="18px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                <path fill="#f98092" d="M135.2 17.7C140.6 6.8 151.7 0 163.8 0L284.2 0c12.1 0 23.2 6.8 28.6 17.7L320 32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 96C14.3 96 0 81.7 0 64S14.3 32 32 32l96 0 7.2-14.3zM32 128l384 0 0 320c0 35.3-28.7 64-64 64L96 512c-35.3 0-64-28.7-64-64l0-320zm96 64c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16z"/>
                            </svg>
                        </span>
                    </div>
                </div>
            </li>`;
        }).join('') + "</ul>";

        document.querySelectorAll(".cross").forEach((cs) => cs.addEventListener("click", function () {
            const li = cs.closest('li');
            li.remove();
            const valueToRemove = li.querySelector(".text").textContent.trim();
            const index = arr.findIndex(item => item.text === valueToRemove);
            if (index !== -1) arr.splice(index, 1);
            const backupIndex = arr2.findIndex(item => item.text === valueToRemove);
            if (backupIndex !== -1) arr2.splice(backupIndex, 1);
            updateStorage();
        }));

        document.querySelectorAll('.move').forEach((mv) => {
            mv.addEventListener("click", function () {
                const toMove = mv.closest('li');
                const parent = toMove.parentElement;
                if (parent.closest('.grid')) {
                    const valueToRemove = toMove.querySelector(".text").textContent.trim();
                    const index = arr.findIndex(item => item.text === valueToRemove);
                    if (index !== -1) arr.splice(index, 1);
                    updateStorage();
                }
                taskList1.append(toMove);
                updateStorage();
            });
        });

        document.querySelectorAll('.move2').forEach((mc) => {
            mc.addEventListener("click", function () {
                const toMove2 = mc.closest('li');
                const parent = toMove2.parentElement;
                if (parent.closest('.grid')) {
                    const valueToRemove = toMove2.querySelector(".text").textContent.trim();
                    const index = arr.findIndex(item => item.text === valueToRemove);
                    if (index !== -1) arr.splice(index, 1);
                    updateStorage();
                }
                taskList2.append(toMove2);
                updateStorage();
            });
        });
    }

    btnn.addEventListener("click", function () {
        let val = par.value.trim();
        if (val !== "") {
            arr.push({ text: val, time: `(${new Date().toLocaleDateString()}) ${new Date().toLocaleTimeString()}` });
            arr2.push({ text: val, time: `(${new Date().toLocaleDateString()}) ${new Date().toLocaleTimeString()}` });
            updateStorage();
        }
        renderTasks();
        par.value = "";
        par.placeholder = val === "" ? "Empty! Enter Your Task Please" : "Enter Your Task ";
    });

    document.querySelector(".top input").addEventListener("input", function () {
        let searchValue = this.value.trim().toLowerCase();
        let filtered = searchValue === '' ? [] : arr2.filter(item => item.text.toLowerCase().includes(searchValue));
        document.querySelector(".top i").innerHTML = filtered.length !== 0 ? `<span>Total result: ${ filtered.length }</span>`: '';
        document.querySelector(".top ul").innerHTML =
            filtered.map(item => `<li>${item.text}</li>`).join('');

        let searchInputs = document.querySelectorAll(".text");

        document.querySelectorAll(".top li").forEach((liItem) => {
            liItem.addEventListener("click", function () {
                let clickedText = liItem.textContent.trim().toLowerCase();
                searchInputs.forEach((input) => {
                    let inputVal = input.textContent.trim().toLowerCase();
                    input.closest('li').style.background = (clickedText === inputVal) ? "#b3e5fc" : "";
                });
            });
        });
    });

    // render tasks on page load
    window.addEventListener("DOMContentLoaded", function() {
    // Load stored tasks from localStorage into the columns
    taskList1.innerHTML = localStorage.getItem("taskList1") || "";
    taskList2.innerHTML = localStorage.getItem("taskList2") || "";
    renderTasks();
    document.querySelector('.clear-btn').addEventListener("click",function(){
        localStorage.clear();
        alert('Task board data cleared!');
        arr=[];
        arr2=[];
        document.querySelectorAll('li').forEach((remove)=>remove.remove());
    });

});
</script>

    
  
</body>
</html>
